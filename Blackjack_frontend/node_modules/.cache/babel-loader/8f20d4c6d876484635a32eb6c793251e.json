{"ast":null,"code":"import Web3 from \"web3\";\nimport BlackJackContractBuild from \"contracts/BlackJackV2.json\"; //let BlackJackContract;\n\nlet isInitial = false;\nlet BlackJackContract;\nlet dealerBal;\nlet accounts;\nlet data; //const PROVIDER_URL='http://localhost:3000'\n\nexport const initializeContract = async () => {\n  let provider = window.ethereum;\n  const web3 = new Web3(provider);\n  const networkID = await web3.eth.net.getId();\n  const contractAddress = BlackJackContractBuild.networks[networkID].address;\n  BlackJackContract = new web3.eth.Contract(BlackJackContractBuild.abi, contractAddress); //const account= await BlackJackContract.methods.getDealer().call()\n\n  accounts = await web3.eth.getAccounts();\n  isInitial = true;\n  dealerBal = await BlackJackContract.methods.dealerBalance().call();\n  const maxb = await BlackJackContract.methods.maxBet().call();\n  const join = await BlackJackContract.methods.joinGame().send({\n    from: accounts[0],\n    value: 10\n  }); //data= await web3.eth.getCode(contractAddress)\n  //const deploy= await  BlackJackContract.deploy({data:data,arguments: [10, 1000]})\n\n  console.log(dealerBal);\n  console.log(maxb); //const dealer= await BlackJackContract.methods.dealer().call()\n  //const balance=await web3.eth.getBalance(contractAddress)\n};\nexport const joinGame = async () => {\n  if (!isInitial) {\n    await initializeContract();\n  }\n\n  return BlackJackContract.methods.joinGame().send({\n    from: accounts[0],\n    value: 10\n  });\n};\nexport const getDealer = async () => {\n  if (!isInitial) {\n    await initializeContract();\n  }\n\n  return BlackJackContract.methods.dealer().call();\n};","map":{"version":3,"names":["Web3","BlackJackContractBuild","isInitial","BlackJackContract","dealerBal","accounts","data","initializeContract","provider","window","ethereum","web3","networkID","eth","net","getId","contractAddress","networks","address","Contract","abi","getAccounts","methods","dealerBalance","call","maxb","maxBet","join","joinGame","send","from","value","console","log","getDealer","dealer"],"sources":["/Users/tedwu/Desktop/未命名檔案夾 4/Blackjack/Blackjack_frontend/src/Web3Client.js"],"sourcesContent":["import Web3 from \"web3\"\nimport BlackJackContractBuild from \"contracts/BlackJackV2.json\"\n\n//let BlackJackContract;\nlet isInitial=false;\nlet BlackJackContract;\nlet dealerBal;\nlet accounts;\nlet data;\n//const PROVIDER_URL='http://localhost:3000'\n\nexport const initializeContract= async ()=>{\n\nlet provider = window.ethereum \nconst web3 =new Web3(provider)\nconst networkID= await web3.eth.net.getId()\nconst contractAddress=BlackJackContractBuild.networks[networkID].address \nBlackJackContract= new web3.eth.Contract(BlackJackContractBuild.abi,contractAddress)\n//const account= await BlackJackContract.methods.getDealer().call()\naccounts = await web3.eth.getAccounts();\nisInitial=true\ndealerBal= await BlackJackContract.methods.dealerBalance().call()\nconst maxb=await BlackJackContract.methods.maxBet().call()\nconst join=await BlackJackContract.methods.joinGame().send({from:accounts[0],value:10})\n//data= await web3.eth.getCode(contractAddress)\n//const deploy= await  BlackJackContract.deploy({data:data,arguments: [10, 1000]})\nconsole.log(dealerBal)\nconsole.log(maxb)\n//const dealer= await BlackJackContract.methods.dealer().call()\n//const balance=await web3.eth.getBalance(contractAddress)\n\n} \n\n\n\nexport const joinGame= async ()=>{\n    if(!isInitial){\n        await initializeContract();}\n   \n        return BlackJackContract.methods.joinGame().send({from:accounts[0],value:10})\n    }\n    \n\n\n\nexport const getDealer= async ()=>{\n    if(!isInitial){\n        await initializeContract();\n    }\n        return BlackJackContract.methods.dealer().call()\n    }\n    \n\n\n\n\n\n"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,sBAAP,MAAmC,4BAAnC,C,CAEA;;AACA,IAAIC,SAAS,GAAC,KAAd;AACA,IAAIC,iBAAJ;AACA,IAAIC,SAAJ;AACA,IAAIC,QAAJ;AACA,IAAIC,IAAJ,C,CACA;;AAEA,OAAO,MAAMC,kBAAkB,GAAE,YAAU;EAE3C,IAAIC,QAAQ,GAAGC,MAAM,CAACC,QAAtB;EACA,MAAMC,IAAI,GAAE,IAAIX,IAAJ,CAASQ,QAAT,CAAZ;EACA,MAAMI,SAAS,GAAE,MAAMD,IAAI,CAACE,GAAL,CAASC,GAAT,CAAaC,KAAb,EAAvB;EACA,MAAMC,eAAe,GAACf,sBAAsB,CAACgB,QAAvB,CAAgCL,SAAhC,EAA2CM,OAAjE;EACAf,iBAAiB,GAAE,IAAIQ,IAAI,CAACE,GAAL,CAASM,QAAb,CAAsBlB,sBAAsB,CAACmB,GAA7C,EAAiDJ,eAAjD,CAAnB,CAN2C,CAO3C;;EACAX,QAAQ,GAAG,MAAMM,IAAI,CAACE,GAAL,CAASQ,WAAT,EAAjB;EACAnB,SAAS,GAAC,IAAV;EACAE,SAAS,GAAE,MAAMD,iBAAiB,CAACmB,OAAlB,CAA0BC,aAA1B,GAA0CC,IAA1C,EAAjB;EACA,MAAMC,IAAI,GAAC,MAAMtB,iBAAiB,CAACmB,OAAlB,CAA0BI,MAA1B,GAAmCF,IAAnC,EAAjB;EACA,MAAMG,IAAI,GAAC,MAAMxB,iBAAiB,CAACmB,OAAlB,CAA0BM,QAA1B,GAAqCC,IAArC,CAA0C;IAACC,IAAI,EAACzB,QAAQ,CAAC,CAAD,CAAd;IAAkB0B,KAAK,EAAC;EAAxB,CAA1C,CAAjB,CAZ2C,CAa3C;EACA;;EACAC,OAAO,CAACC,GAAR,CAAY7B,SAAZ;EACA4B,OAAO,CAACC,GAAR,CAAYR,IAAZ,EAhB2C,CAiB3C;EACA;AAEC,CApBM;AAwBP,OAAO,MAAMG,QAAQ,GAAE,YAAU;EAC7B,IAAG,CAAC1B,SAAJ,EAAc;IACV,MAAMK,kBAAkB,EAAxB;EAA4B;;EAE5B,OAAOJ,iBAAiB,CAACmB,OAAlB,CAA0BM,QAA1B,GAAqCC,IAArC,CAA0C;IAACC,IAAI,EAACzB,QAAQ,CAAC,CAAD,CAAd;IAAkB0B,KAAK,EAAC;EAAxB,CAA1C,CAAP;AACH,CALE;AAUP,OAAO,MAAMG,SAAS,GAAE,YAAU;EAC9B,IAAG,CAAChC,SAAJ,EAAc;IACV,MAAMK,kBAAkB,EAAxB;EACH;;EACG,OAAOJ,iBAAiB,CAACmB,OAAlB,CAA0Ba,MAA1B,GAAmCX,IAAnC,EAAP;AACH,CALE"},"metadata":{},"sourceType":"module"}