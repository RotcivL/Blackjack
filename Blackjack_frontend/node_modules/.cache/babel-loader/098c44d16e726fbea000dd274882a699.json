{"ast":null,"code":"var _jsxFileName = \"/Users/tedwu/Desktop/\\u672A\\u547D\\u540D\\u6A94\\u6848\\u593E 4/Blackjack/Blackjack_frontend/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from 'react';\nimport Dealer from './components/Dealer';\nimport Player from './components/Players';\nimport styles from \"../src/style/table.module.css\";\nimport backgroundImage from \"./table_background.jpeg\";\nimport StartDialog from './components/StartDialog';\nimport Button from '@mui/material/Button';\nimport { initializeContract, joinGame, getStatus, startGame, getHandCard } from \"./Web3Client\"; //import ReactDOM from 'react-dom';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const PROVIDER_URL = 'http://localhost:3000';\n\n  const connectWalletHandler = async () => {\n    //const web3= new Web3(PROVIDER_URL)\n    let provider = window.ethereum;\n\n    if (typeof provider !== \"undefined\") {\n      try {\n        const accounts = await provider.request({\n          method: \"eth_requestAccounts\"\n        });\n        setAccount(accounts[0]);\n      } catch (err) {\n        console.log(\"err:\", err);\n      }\n    } else {\n      alert(\"You need to install MetaMask.\");\n    }\n  };\n  /*\n  This method is for initiallizing deck \n  */\n\n\n  const deckBuilder = () => {\n    const temp_deck = [];\n    const values = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\n    const types = [\"C\", \"D\", \"H\", \"S\"];\n\n    for (let i = 0; i < types.length; i++) {\n      for (let j = 0; j < values.length; j++) {\n        temp_deck.push({\n          value: values[j],\n          type: types[i]\n        });\n      }\n    }\n\n    for (let i = temp_deck.length - 1; i > 0; i--) {\n      let j = Math.floor(Math.random() * (i + 1));\n      let temp = temp_deck[i];\n      temp_deck[i] = temp_deck[j];\n      temp_deck[j] = temp;\n    }\n\n    return temp_deck;\n  };\n\n  const cardInterpreter = cardIndexList => {\n    const temp_cardList = [];\n    const values = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\n    const types = [\"C\", \"D\", \"H\", \"S\"];\n\n    for (let i = 0; i < cardIndexList.length; i++) {\n      const index = cardIndexList[i];\n      const value_index = index % 52 % 13;\n      const type_index = Math.floor(index % 52 / 13);\n      const card = {\n        value: values[value_index],\n        type: types[type_index]\n      };\n      temp_cardList.push(card);\n    }\n\n    return temp_cardList;\n  };\n\n  const dealingInterval = 1000;\n  const [account, setAccount] = useState(null);\n  const [dealer, setDealer] = useState(null); //const [metamaskAccount,setmetamaskAccount]=useState(null)\n\n  const [dealerBal, setDealerBal] = useState(null);\n  const [player, setPlayer] = useState(null);\n  const [playerBal, setPlayerBal] = useState(null);\n  const [contractBal, setContractBal] = useState(null);\n  const initialCardCount = 2;\n  const [isInitialStarted, setIsInitialStarted] = useState(false);\n  const [playerList, setPlayerList] = useState([]);\n  const [deck] = useState(deckBuilder());\n  const [dealerCardList, setDealerCardList] = useState([]);\n  const [turnIndex, setTurnIndex] = useState('');\n  const [isDealerTurn, setIsDealerTurn] = useState(false);\n\n  const wait = ms => new Promise(resolve => setTimeout(resolve, ms));\n  /*\n  Fetch players' data and then initiallize player list.\n  When isRoundStarted truns true, each player gets their initial cards by triggering dealing method\n  */\n\n\n  useEffect(() => {\n    async function listenMMAccount() {\n      window.ethereum.on(\"accountsChanged\", async function () {\n        // Time to reload your interface with accounts[0]!\n        let provider = window.ethereum;\n        const accounts = await provider.request({\n          method: \"eth_requestAccounts\"\n        });\n        setAccount(accounts[0]); // accounts = await web3.eth.getAccounts();\n      });\n    }\n\n    listenMMAccount();\n  }, []);\n  useEffect(() => {\n    connectWalletHandler();\n    setStatusHandler();\n  });\n\n  const joinGameHandler = async () => {\n    const result = await joinGame();\n\n    if (result) {\n      setStatusHandler(); //console.log(result)\n    }\n  };\n\n  const startGameHandler = async () => {\n    const result = await startGame();\n\n    if (result) {\n      await setStatusHandler();\n      setHandHandler();\n    }\n  };\n\n  const setStatusHandler = async () => {\n    const statusArr = await getStatus(); //setmetamaskAccount(statusArr.metamask_account)\n\n    setDealer(statusArr[0].dealer);\n    setDealerBal(statusArr[0].dealerBal);\n    setPlayer(statusArr[0].player);\n    setPlayerBal(statusArr[0].playerBal);\n    setContractBal(statusArr[0].contractBal);\n  };\n\n  const setHandHandler = async () => {\n    const handCard = await getHandCard();\n    const player_add = player; //TODO parameterize bet\n\n    const newPlayerList = [];\n    const dealerHand_index = handCard.dealerHand;\n    const playerHand_index = handCard.playerHand;\n    console.log(\"dhindex: \", dealerHand_index);\n    const dealerHand = cardInterpreter(dealerHand_index);\n    const playerHand = cardInterpreter(playerHand_index);\n\n    for (let i = 0; i < 2; i++) {\n      await wait(dealingInterval);\n      player_json.cardList.push(playerHand);\n    }\n\n    const player_json = {\n      address: player_add,\n      cardList: [],\n      name: \"goodguy\",\n      isMe: true,\n      bet: 10\n    };\n    const newPlayerJSON = arrPusher(playerHand, player_json);\n    newPlayerList.push(newPlayerJSON);\n    setDealerCardList([...dealerHand]);\n    setPlayerList([...newPlayerList]); //console.log(dealerCardList,playerList)\n  };\n\n  const arrPusher = (arr, pushedJSON) => {\n    for (let i = 0; i < arr.length; i++) {\n      pushedJSON.cardList.push(arr[i]);\n    }\n\n    return pushedJSON;\n  };\n  /*\n    In certain amount of duration, normal player gets card with clockwise order.\n    Dealer gets card lastly.\n    */\n\n\n  const dealing = async playerList => {\n    const temp_playerList = playerList;\n    const temp_dealerCardList = dealerCardList;\n\n    if (isInitialStarted !== true) {\n      return;\n    } else {\n      for (let i = 0; i < initialCardCount; i++) {\n        for (let j = 0; j < temp_playerList.length; j++) {\n          await wait(dealingInterval);\n          temp_playerList[j].cardList.push(deck.pop());\n          setPlayerList([...temp_playerList]);\n        }\n\n        await wait(dealingInterval);\n        temp_dealerCardList.push(deck.pop());\n        setDealerCardList([...temp_dealerCardList]);\n      }\n    }\n\n    setIsInitialStarted(false);\n    setTurnIndex(0);\n  };\n  /*\n    Start dealing cards.\n    */\n\n\n  const startHandler = () => {\n    setIsInitialStarted(true);\n  };\n\n  const nextPlayerHandler = () => {\n    if (turnIndex < playerList.length - 1) {\n      const nextIndex = turnIndex + 1;\n      setTurnIndex(nextIndex);\n    } else {\n      setIsDealerTurn(true);\n    }\n  };\n\n  const hitHandler = index => {\n    const temp_playerList = playerList;\n    temp_playerList[index].cardList.push(deck.pop());\n    setPlayerList([...temp_playerList]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        position: \"absolute\",\n        marginLeft: \"1800px\",\n        paddingTop: \"30px\",\n        paddingRight: \"30px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(StartDialog, {\n        startHandler: startHandler,\n        initializeContract: initializeContract,\n        dealer: dealer,\n        player: player,\n        account: account,\n        joinGameHandler: joinGameHandler,\n        setStatusHandler: setStatusHandler,\n        startGameHandler: startGameHandler,\n        setHandHandler: setHandHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginLeft: \"auto\",\n          marginBottom: \"-40px\"\n        },\n        onClick: connectWalletHandler,\n        variant: \"contained\",\n        children: \"Switch wallet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: `this is current account:${account}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.table,\n      style: {\n        backgroundImage: `url(${backgroundImage})`\n      },\n      children: [/*#__PURE__*/_jsxDEV(Dealer, {\n        cardList: dealerCardList,\n        isDealerTurn: isDealerTurn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 5\n      }, this), playerList.map((player, index) => /*#__PURE__*/_jsxDEV(Player, {\n        playerIndex: index,\n        name: player.name,\n        isMe: player.isMe,\n        bet: player.bet,\n        cardList: player.cardList,\n        whosTurn: turnIndex,\n        nextPlayerHandler: nextPlayerHandler,\n        hitHandler: hitHandler\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 38\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(App, \"WhQzXHBnNKg5VUwNXqmxiRb11IY=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Dealer","Player","styles","backgroundImage","StartDialog","Button","initializeContract","joinGame","getStatus","startGame","getHandCard","App","PROVIDER_URL","connectWalletHandler","provider","window","ethereum","accounts","request","method","setAccount","err","console","log","alert","deckBuilder","temp_deck","values","types","i","length","j","push","value","type","Math","floor","random","temp","cardInterpreter","cardIndexList","temp_cardList","index","value_index","type_index","card","dealingInterval","account","dealer","setDealer","dealerBal","setDealerBal","player","setPlayer","playerBal","setPlayerBal","contractBal","setContractBal","initialCardCount","isInitialStarted","setIsInitialStarted","playerList","setPlayerList","deck","dealerCardList","setDealerCardList","turnIndex","setTurnIndex","isDealerTurn","setIsDealerTurn","wait","ms","Promise","resolve","setTimeout","listenMMAccount","on","setStatusHandler","joinGameHandler","result","startGameHandler","setHandHandler","statusArr","handCard","player_add","newPlayerList","dealerHand_index","dealerHand","playerHand_index","playerHand","player_json","cardList","address","name","isMe","bet","newPlayerJSON","arrPusher","arr","pushedJSON","dealing","temp_playerList","temp_dealerCardList","pop","startHandler","nextPlayerHandler","nextIndex","hitHandler","position","marginLeft","paddingTop","paddingRight","marginBottom","table","map"],"sources":["/Users/tedwu/Desktop/未命名檔案夾 4/Blackjack/Blackjack_frontend/src/App.js"],"sourcesContent":["\nimport { React, useState, useEffect } from 'react';\nimport Dealer from './components/Dealer';\nimport Player from './components/Players';\nimport styles from \"../src/style/table.module.css\"\nimport backgroundImage from \"./table_background.jpeg\"\nimport StartDialog from './components/StartDialog';\nimport Button from '@mui/material/Button';\nimport {initializeContract, joinGame, getStatus, startGame,getHandCard} from \"./Web3Client\";\n\n\n\n\n\n//import ReactDOM from 'react-dom';\n\n\n\nconst App=()=> {\n\n  const PROVIDER_URL='http://localhost:3000'\n\n  const connectWalletHandler= async()=>{\n    //const web3= new Web3(PROVIDER_URL)\n    let provider=window.ethereum;\n    if(typeof provider!==\"undefined\"){\n      try{\n        const accounts= await provider.request({method:\"eth_requestAccounts\"})\n        setAccount(accounts[0])\n      }catch(err){\n        console.log(\"err:\",err)\n      }\n       \n\n    }\n    else{\n      alert(\"You need to install MetaMask.\")\n    }\n\n  }\n    \n\n  \n\n\n\n  /*\n  This method is for initiallizing deck \n  */\n  const deckBuilder=()=>{\n    const temp_deck=[]\n    const values = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\n    const types = [\"C\", \"D\", \"H\", \"S\"]; \n    for (let i=0;i<types.length;i++ ){\n      for(let j=0;j<values.length;j++){\n       temp_deck.push({value:values[j],\n                   type:types[i]})\n      }\n    }\n    for (let i = temp_deck.length - 1; i > 0; i--) {\n      let j = Math.floor(Math.random() * (i + 1));\n      let temp = temp_deck[i];\n      temp_deck[i] = temp_deck[j];\n      temp_deck[j] = temp;\n  }\n  return temp_deck\n   }\n\n   const cardInterpreter=(cardIndexList)=>{\n     const temp_cardList=[]\n     const values = [\"A\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"J\", \"Q\", \"K\"];\n     const types = [\"C\", \"D\", \"H\", \"S\"];\n     for (let i=0;i<cardIndexList.length;i++){\n       const index=cardIndexList[i]\n       const value_index=index%52%13\n       const type_index=Math.floor(index%52/13)\n       const card={value:values[value_index],type:types[type_index]}\n       temp_cardList.push(card)\n     }\n     return temp_cardList\n\n   }\n \n   \n   \n  const dealingInterval=1000;\n\n  const [account,setAccount]=useState(null)\n\n  const [dealer,setDealer]=useState(null)\n\n  //const [metamaskAccount,setmetamaskAccount]=useState(null)\n\n  const [dealerBal,setDealerBal]=useState(null)\n\n  const[player,setPlayer]=useState(null)\n\n  const[playerBal,setPlayerBal]=useState(null)\n\n  const[contractBal,setContractBal]=useState(null)\n\n\n\n  \n  const initialCardCount=2\n  \n  const [isInitialStarted,setIsInitialStarted]=useState(false)\n\n  const[playerList,setPlayerList]=useState([])\n  \n  const[deck,]=useState(deckBuilder())\n\n  const[dealerCardList, setDealerCardList]=useState([])\n\n  const[turnIndex,setTurnIndex]=useState('')\n\n  const[isDealerTurn,setIsDealerTurn]=useState(false)\n\n\n  const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms))\n  /*\n  Fetch players' data and then initiallize player list.\n  When isRoundStarted truns true, each player gets their initial cards by triggering dealing method\n  */\n  useEffect(() => {\n    async function listenMMAccount() {\n      window.ethereum.on(\"accountsChanged\", async function() {\n        // Time to reload your interface with accounts[0]!\n        let provider=window.ethereum;\n        const accounts= await provider.request({method:\"eth_requestAccounts\"})\n        setAccount(accounts[0])\n        // accounts = await web3.eth.getAccounts();\n      });\n    }\n    listenMMAccount();\n  }, []);\n  \n  \n\n\nuseEffect(()=>{\n  connectWalletHandler()\n  setStatusHandler()\n},)\n\n\n\nconst joinGameHandler= async ()=>{\n  const result=await joinGame()\n  if(result){\n    setStatusHandler()\n    //console.log(result)\n  }\n\n}\n\nconst startGameHandler=async()=>{\n  const result=await startGame()\n  if(result){\n    await setStatusHandler()\n    setHandHandler()\n  }\n}\n\nconst setStatusHandler=async()=>{\n  const statusArr=await getStatus()\n  //setmetamaskAccount(statusArr.metamask_account)\n  setDealer(statusArr[0].dealer)\n  setDealerBal(statusArr[0].dealerBal)\n  setPlayer(statusArr[0].player)\n  setPlayerBal(statusArr[0].playerBal)\n  setContractBal(statusArr[0].contractBal)\n  \n\n}\n\nconst setHandHandler=async()=>{\n   const handCard=await getHandCard()\n   const player_add=player\n   //TODO parameterize bet\n   const newPlayerList=[]\n   const dealerHand_index=handCard.dealerHand\n   const playerHand_index=handCard.playerHand\n   console.log(\"dhindex: \",dealerHand_index)\n   const dealerHand=cardInterpreter(dealerHand_index)\n   const playerHand=cardInterpreter(playerHand_index)\n   for (let i=0;i<2;i++){\n    await wait(dealingInterval)\n    player_json.cardList.push(playerHand)\n\n   }\n   const player_json={address:player_add,cardList:[],name:\"goodguy\",isMe:true,bet:10}\n   const newPlayerJSON=arrPusher(playerHand,player_json)\n   newPlayerList.push(newPlayerJSON)\n   setDealerCardList([...dealerHand])\n   setPlayerList([...newPlayerList])\n   //console.log(dealerCardList,playerList)\n   \n}\nconst arrPusher=(arr,pushedJSON)=>{\n  for(let i=0;i<arr.length;i++){\n    pushedJSON.cardList.push(arr[i])\n  }\n  return pushedJSON\n}\n \n   \n    \n/*\n  In certain amount of duration, normal player gets card with clockwise order.\n  Dealer gets card lastly.\n  */\n     \n    \n  \n\n\nconst dealing = async (playerList)=>{\n    const temp_playerList=playerList\n    const temp_dealerCardList=dealerCardList\n    if(isInitialStarted!==true){\n      return\n    }\n    else{\n      for (let i=0; i <initialCardCount; i++ ){\n        for (let j=0;j<temp_playerList.length;j++){\n          await wait(dealingInterval)\n          temp_playerList[j].cardList.push(deck.pop())\n          setPlayerList([...temp_playerList])\n      }\n      await wait(dealingInterval)\n      temp_dealerCardList.push(deck.pop())\n      setDealerCardList([...temp_dealerCardList])\n      }\n\n    }\n    setIsInitialStarted(false)\n    setTurnIndex(0)\n    \n    \n    \n  }\n/*\n  Start dealing cards.\n  */\n\n  const startHandler=()=>{\n    setIsInitialStarted(true)\n  }\n\n  const nextPlayerHandler=()=>{\n    if (turnIndex<playerList.length-1){\n    const nextIndex=turnIndex+1\n    setTurnIndex(nextIndex)\n    }\n    else{\n      setIsDealerTurn(true)\n    }\n  }\n\n  const hitHandler=(index)=>{\n    const temp_playerList=playerList\n    temp_playerList[index].cardList.push(deck.pop())\n    setPlayerList([...temp_playerList])\n  }\n\n\n \n  \n\n\n  \n\n  return (\n    <>\n    <section\n    style={\n      {\n        position:\"absolute\",\n        marginLeft:\"1800px\",\n        paddingTop:\"30px\",\n        paddingRight:\"30px\"\n\n      }\n    }\n    >\n     <StartDialog\n    startHandler={startHandler}\n    initializeContract={initializeContract}\n    dealer={dealer}\n    player={player}\n    account={account}\n    joinGameHandler={joinGameHandler}\n    setStatusHandler={setStatusHandler}\n    startGameHandler={startGameHandler}\n    setHandHandler={setHandHandler}\n    \n\n    />\n   <Button \n   style={{ \n    marginLeft: \"auto\",\n    marginBottom:\"-40px\" }}\n   onClick={connectWalletHandler}\n   variant=\"contained\"\n   >{\"Switch wallet\"}\n   </Button>\n   <p>\n     {`this is current account:${account}`}\n   </p>\n   \n  \n   </section>\n    <div \n    className={styles.table}\n    style={{backgroundImage: `url(${backgroundImage})`}}\n    >\n   \n   \n    <Dealer\n    cardList={dealerCardList}\n    isDealerTurn={isDealerTurn}\n    />\n    \n    {playerList.map((player, index)=><Player\n      key={index}\n      playerIndex={index}\n      name={player.name}\n      isMe={player.isMe}\n      bet={player.bet}\n      cardList={player.cardList}\n      whosTurn={turnIndex}\n      nextPlayerHandler={nextPlayerHandler}\n      hitHandler={hitHandler}/>\n    )}\n    \n    </div>\n    </>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}